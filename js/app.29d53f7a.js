(function(e){function t(t){for(var l,i,s=t[0],a=t[1],c=t[2],h=0,p=[];h<s.length;h++)i=s[h],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l]);d&&d(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],l=!0,s=1;s<n.length;s++){var a=n[s];0!==r[a]&&(l=!1)}l&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var l={},r={app:0},o=[];function i(t){if(l[t])return l[t].exports;var n=l[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=l,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)i.d(n,l,function(t){return e[t]}.bind(null,l));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/treeEditor/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],a=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=a;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var l=n("85ec"),r=n.n(l);r.a},"139c":function(e){e.exports=JSON.parse("{}")},"3c39":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var l,r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("el-container",[n("el-header"),n("el-main",[n("dndtree",{staticClass:"treeContainer"})],1)],1)],1)},i=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-container",[n("el-drawer",{attrs:{visible:e.isAdding,"with-header":!1},on:{"update:visible":function(t){e.isAdding=t}}},[n("div",{staticClass:"nodeCreator"},[n("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[n("el-form-item",{attrs:{label:"节点名称"}},[n("el-input",{attrs:{clearable:""},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}})],1),n("el-form-item",{attrs:{label:"节点形状"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.newShape,callback:function(t){e.newShape=t},expression:"newShape"}},[n("el-option",{attrs:{label:"圆形",value:"circle"}}),n("el-option",{attrs:{label:"矩形",value:"rect"}}),n("el-option",{attrs:{label:"椭圆形",value:"ellipse"}})],1)],1),n("el-form-item",{attrs:{label:"节点颜色"}},[n("el-color-picker",{model:{value:e.newColor,callback:function(t){e.newColor=t},expression:"newColor"}})],1),n("el-form-item",{attrs:{label:"边框颜色"}},[n("el-color-picker",{model:{value:e.newStrokeColor,callback:function(t){e.newStrokeColor=t},expression:"newStrokeColor"}})],1),n("el-form-item",{attrs:{label:e.newp1Name}},[n("el-slider",{attrs:{step:1},model:{value:e.newP1,callback:function(t){e.newP1=t},expression:"newP1"}})],1),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"circle"!=e.newShape,expression:"newShape != 'circle'"}],attrs:{label:e.newp2Name}},[n("el-slider",{attrs:{step:1},model:{value:e.newP2,callback:function(t){e.newP2=t},expression:"newP2"}})],1),n("el-form-item",{attrs:{label:"边框宽度"}},[n("el-slider",{attrs:{"format-tooltip":e.formatTooltip},model:{value:e.newStrokeWidth,callback:function(t){e.newStrokeWidth=t},expression:"newStrokeWidth"}})],1)],1),n("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.createNode()}}},[e._v(" 添加 ")])],1)]),n("el-aside",[n("div",{staticClass:"Editor"},[n("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[n("el-form-item",{attrs:{label:"节点名称"}},[n("el-input",{attrs:{clearable:""},model:{value:e.selectedName,callback:function(t){e.selectedName=t},expression:"selectedName"}})],1),n("el-form-item",{attrs:{label:"节点形状"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectedShape,callback:function(t){e.selectedShape=t},expression:"selectedShape"}},[n("el-option",{attrs:{label:"圆形",value:"circle"}}),n("el-option",{attrs:{label:"矩形",value:"rect"}}),n("el-option",{attrs:{label:"椭圆形",value:"ellipse"}})],1)],1),n("el-form-item",{attrs:{label:"节点颜色"}},[n("el-color-picker",{model:{value:e.selectedColor,callback:function(t){e.selectedColor=t},expression:"selectedColor"}})],1),n("el-form-item",{attrs:{label:"边框颜色"}},[n("el-color-picker",{model:{value:e.selectedStrokeColor,callback:function(t){e.selectedStrokeColor=t},expression:"selectedStrokeColor"}})],1),n("el-form-item",{attrs:{label:e.p1Name}},[n("el-slider",{attrs:{step:1},model:{value:e.selectedP1,callback:function(t){e.selectedP1=t},expression:"selectedP1"}})],1),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"circle"!=e.selectedShape,expression:"selectedShape != 'circle'"}],attrs:{label:e.p2Name}},[n("el-slider",{attrs:{step:1},model:{value:e.selectedP2,callback:function(t){e.selectedP2=t},expression:"selectedP2"}})],1),n("el-form-item",{attrs:{label:"边框宽度"}},[n("el-slider",{attrs:{"format-tooltip":e.formatTooltip},model:{value:e.selectedStrokeWidth,callback:function(t){e.selectedStrokeWidth=t},expression:"selectedStrokeWidth"}})],1)],1)],1)]),n("el-main",[n("div",{attrs:{id:"tree-container"}},[n("svg",{staticClass:"overlay"},[n("g",[e._l(e.links,(function(t,l){return n("path",{key:"line"+l,staticClass:"link",attrs:{d:e.diagonal(t)}})})),e._l(e.nodes,(function(t){return n("g",{key:"node"+t.id,staticClass:"node",attrs:{transform:e.nodeTransform(t.x,t.y)},on:{click:function(n){return e.nodeClick(t)}}},["circle"==t.icon.shape?n("circle",{style:e.setStyle(t._children,t.icon.color,t.icon.strokeWidth,t.icon.strokeColor),attrs:{r:t.icon.p1}}):e._e(),"rect"==t.icon.shape?n("rect",{style:e.setStyle(t._children,t.icon.color,t.icon.strokeWidth,t.icon.strokeColor),attrs:{width:t.icon.p1,height:t.icon.p2,x:-t.icon.p1/2,y:-t.icon.p2/2}}):e._e(),"ellipse"==t.icon.shape?n("ellipse",{style:e.setStyle(t._children,t.icon.color,t.icon.strokeWidth,t.icon.strokeColor),attrs:{rx:t.icon.p1,ry:t.icon.p2}}):e._e(),n("text",{staticClass:"nodeText",staticStyle:{"fill-opacity":"1"},attrs:{x:t.children||t._children?-10:10,dy:".35em","text-anchor":e.textAnchor(t.children,t._children)}},[e._v(" "+e._s(t.name)+" ")]),n("circle",{staticClass:"ghostCircle",staticStyle:{fill:"rgb(253, 101, 116)"},attrs:{r:"30",opacity:"0.2","pointer-events":"mouseover"},on:{mouseover:function(n){return e.overCircle(t)},mouseenter:function(n){return e.overCircle(t)},mouseout:function(n){return e.outCircle(t)}}})])}))],2)])]),e._l(e.childrenTable,(function(t,l){return n("el-row",{key:"list"+l,staticStyle:{"margin-top":"15px"}},e._l(t,(function(t,l){return n("el-col",{key:"child"+l,staticStyle:{"margin-right":"10px"},attrs:{span:6}},["card"==t.component?n("el-card",{staticClass:"childCard",attrs:{"body-style":{height:"80%",width:"87%","background-color":"#AEE6CB",color:"#FFF","text-align":"center","font-weight":"bold","font-size":"20px"}},nativeOn:{click:function(n){return e.nodeClick(t)}}},[n("el-button",{staticStyle:{float:"right"},attrs:{type:"success",icon:"el-icon-close",size:"mini",plain:"",circle:""},on:{click:function(n){return n.stopPropagation(),e.del(t)}}}),n("span",[e._v(" "+e._s(t.name)+" ")]),e._l(t.children,(function(t,l){return n("el-row",{key:l,staticStyle:{"text-align":"left","font-size":"14px"}},[e._v(" "+e._s(t.name)+" ")])}))],2):e._e(),"add"==t.component?n("el-card",{staticClass:"addCompoent",attrs:{"body-style":{"border-style":"dashed",height:"70%",width:"85%","border-width":"2px","border-color":"#6C6C76","border-radius":"4px","background-color":"#E5E1E0","font-size":"30px","text-align":"center",position:"relative",opacity:"0.3"},shadow:"hover"}},[n("div",{staticStyle:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},[n("el-button",{attrs:{type:"info",icon:"el-icon-circle-plus",plain:""},nativeOn:{click:function(t){e.isAdding=!0}}},[e._v(" add ")])],1)]):e._e()],1)})),1)}))],2)],1)],1)},a=[],c=(n("99af"),n("4de4"),n("c740"),n("4160"),n("c975"),n("a434"),n("b0c0"),n("159b"),n("a4d0")),d=n("b188"),h=(n("139c"),0),p=null,u=null,f=200,m=20,v=0,k=750,g=1500,b=600,w=null,x=null,C=null,y=!1,S=null,N=(c["svg"].diagonal().projection((function(e){return[e.y,e.x]})),null),_=null,P=null;function I(e,t,n){if(e){t(e);var l=n(e);if(l)for(var r=l.length,o=0;o<r;o++)I(l[o],t,n)}}function A(){w.sort((function(e,t){return t.name.toLowerCase()<e.name.toLowerCase()?1:-1}))}function E(e,t){var n=f;if(panTimer){clearTimeout(panTimer),translateCoords=c["transform"](C.attr("transform")),"left"==t||"right"==t?(translateX="left"==t?translateCoords.translate[0]+n:translateCoords.translate[0]-n,translateY=translateCoords.translate[1]):"up"!=t&&"down"!=t||(translateX=translateCoords.translate[0],translateY="up"==t?translateCoords.translate[1]+n:translateCoords.translate[1]-n),scaleX=translateCoords.scale[0],scaleY=translateCoords.scale[1];var l=S.scale();C.transition().attr("transform","translate("+translateX+","+translateY+")scale("+l+")"),c["select"](e).select("g.node").attr("transform","translate("+translateX+","+translateY+")"),S.scale(S.scale()),S.translate([translateX,translateY]),panTimer=setTimeout((function(){E(e,n,t)}),50)}}function T(){C.attr("transform","translate("+c["event"].translate+")scale("+c["event"].scale+")")}function W(e){var t=S.scale(),n=-e.y0,l=-e.x0;n=n*t+g/5,l=l*t+b/2,c["select"]("g").transition().duration(k).attr("transform","translate("+n+","+l+")scale("+t+")"),S.scale(t),S.translate([n,l])}var O=function(){var e=[];null!==p&&null!==u&&(e=[{source:{x:u.y0,y:u.x0},target:{x:p.y0,y:p.x0}}]);var t=C.selectAll(".templink").data(e);t.enter().append("path").attr("class","templink").attr("d",c["svg"].diagonal()).attr("pointer-events","none"),t.attr("d",c["svg"].diagonal()),t.exit().remove()};function F(e,t){if(p=e,c["select"](t).select(".ghostCircle").attr("pointer-events","none"),c["selectAll"](".ghostCircle").attr("class","ghostCircle show"),c["select"](t).attr("class","node activeDrag"),c["selectAll"]("g.node").sort((function(e,t){return e.id!=p.id?1:-1})),N.length>1){var n=w.links(N);c["selectAll"]("path.link").data(n,(function(e){return e.target.id})).remove(),c["selectAll"]("g.node").data(N,(function(e){return e.id})).filter((function(e,t){return e.id!=p.id})).remove()}z.methods.removeLink(),y=null}function j(){u=null,c["selectAll"](".ghostCircle").attr("class","ghostCircle"),c["select"](_).attr("class","node"),c["select"](_).select(".ghostCircle").attr("pointer-events",""),O(),null!==p&&(z.methods.update(l),W(p),p=null)}function D(e){e._children&&(e.children=e._children,e.children.forEach(D),e._children=null)}c["behavior"].drag().on("dragstart",(function(e){e!=l&&(y=!0,N=w.nodes(e),c["event"].sourceEvent.stopPropagation())})).on("drag",(function(e){if(e!=l){y&&(_=this,F(e,_));var t=document.getElementsByTagName("svg")[0],n=c["mouse"](t);if(n[0]<m)panTimer=!0,E(this,"left");else if(n[0]>t.getAttribute("width")-m)panTimer=!0,E(this,"right");else if(n[1]<m)panTimer=!0,E(this,"up");else if(n[1]>t.getAttribute("height")-m)panTimer=!0,E(this,"down");else try{clearTimeout(panTimer)}catch(o){}e.x0+=c["event"].dy,e.y0+=c["event"].dx;var r=c["select"](this);r.attr("transform","translate("+e.y0+","+e.x0+")"),O()}})).on("dragend",(function(e){if(e!=l)if(_=this,u){var t=p.parent.children.indexOf(p);t>-1&&p.parent.children.splice(t,1),"undefined"!==typeof u.children||"undefined"!==typeof u._children?"undefined"!==typeof u.children?u.children.push(p):u._children.push(p):(u.children=[],u.children.push(p)),D(u),A(),j()}else j()}));var z={name:"dndtree",props:{msg:String},data:function(){return{isSelect:!1,isAdding:!1,selectedName:"",selectedP1:0,selectedP2:0,selectedShape:"",selectedColor:"",selectedStrokeWidth:0,selectedStrokeColor:"",selectedIndex:0,selectedId:-1,newName:"newNode",newP1:6,newP2:6,newShape:"circle",newColor:"#F2A490",newStrokeWidth:15,newStrokeColor:"#E97658",newp1Name:"半径",newp2Name:"",childrenTable:[],p1Name:null,p2Name:null,d3data:null,treeData:d,nodes:null,links:null,array:[1,2],diagonal:c["svg"].diagonal().projection((function(e){return[e.y,e.x]}))}},mounted:function(){var e=this;P=this,w=c["layout"].tree().size([b,g]),I(e.treeData,(function(e){h=Math.max(e.name.length,h)}),(function(e){return e.children&&e.children.length>0?e.children:null})),A(),S=c["behavior"].zoom().scaleExtent([.1,3]).on("zoom",T),x=c["select"]("#tree-container").select("svg").attr("width",g).attr("height",b).attr("class","overlay").call(S),C=x.select("g"),l=e.treeData,l.x0=b/2,l.y0=0,this.update(l,this),W(l)},watch:{selectedName:function(e){this.nodes[this.selectedIndex].name=e},selectedColor:function(e){this.nodes[this.selectedIndex].icon.color=e},selectedP1:function(e){this.nodes[this.selectedIndex].icon.p1=e},selectedP2:function(e){this.nodes[this.selectedIndex].icon.p2=e},selectedShape:function(e){this.nodes[this.selectedIndex].icon.shape=e,"circle"==this.selectedShape?this.p1Name="半径":"rect"==this.selectedShape?(this.p1Name="宽度",this.p2Name="高度"):"ellipse"==this.selectedShape&&(this.p1Name="长轴",this.p2Name="短轴")},selectedStrokeColor:function(e){this.nodes[this.selectedIndex].icon.strokeColor=e},selectedStrokeWidth:function(e){this.nodes[this.selectedIndex].icon.strokeWidth=e/10},newShape:function(e){"circle"==this.newShape?this.newp1Name="半径":"rect"==this.newShape?(this.newp1Name="宽度",this.newp2Name="高度"):"ellipse"==this.newShape&&(this.newp1Name="长轴",this.newp2Name="短轴")}},methods:{forceUpdate:function(e){this.$forceUpdate()},nodeClick:function(e){this.setSelectNode(e),this.update(l),W(e),console.log(JSON.stringify(l))},del:function(e){for(var t=0;t<this.nodes[this.selectedIndex].children.length;t++)this.nodes[this.selectedIndex].children[t].id==e.id&&this.nodes[this.selectedIndex].children.splice(t,1);this.update(l),W(this.nodes[this.selectedIndex])},cutChildLine:function(e){var t=this,n=[];if(e&&e.length>0)for(var l=0;l<e.length;l++){var r=e[l];r.cid=l,r.component="card",n.push(r),l%4==3&&(t.childrenTable.push(n),n=[])}var o={name:"addCompoent",component:"add"};n.push(o),0!=n.length&&t.childrenTable.push(n)},findIndex:function(e){for(var t=0;t<this.nodes.length;t++)if(this.nodes[t].id==e)return t;return-1},createNode:function(){var e=this;if(null!=e.nodes[e.selectedIndex].children)for(var t=0;t<e.nodes[e.selectedIndex].children.length;t++)if(e.nodes[e.selectedIndex].children[t].name==e.newName)return void e.$notify.error({title:"同名节点已存在",message:"在同一目录下命名同名节点可能会发生错误"});var n={name:e.newName,icon:{color:e.newColor,shape:e.newShape,p1:e.newP1,p2:e.newP2,strokeWidth:e.newStrokeWidth/10,strokeColor:e.newStrokeColor},children:[]};null==e.nodes[e.selectedIndex].children&&(e.nodes[e.selectedIndex].children=[]),e.nodes[e.selectedIndex].children.push(n),e.update(l),W(l),console.log(e.nodes)},setSelectNode:function(e){this.selectedName=e.name,this.selectedId=e.id,this.selectedIndex=this.findIndex(e.id),this.selectedP1=parseInt(e.icon.p1),this.selectedP2=parseInt(e.icon.p2),this.selectedShape=e.icon.shape,this.selectedColor=e.icon.color,this.selectedStrokeWidth=parseInt(10*e.icon.strokeWidth),this.selectedStrokeColor=e.icon.strokeColor,this.childrenTable=[],this.cutChildLine(e.children),"circle"==this.selectedShape?this.p1Name="半径":"rect"==this.selectedShape?(this.p1Name="宽度",this.p2Name="高度"):"ellipse"==this.selectedShape&&(this.p1Name="长轴",this.p2Name="短轴")},formatTooltip:function(e){return e/10},update:function(e){var t=P,n=[1],r=function e(t,l){l.children&&l.children.length>0&&(n.length<=t+1&&n.push(0),n[t+1]+=l.children.length,l.children.forEach((function(n){e(t+1,n)})))};r(0,l);var o=100*c["max"](n);w=w.size([o,g]),A(),t.nodes=w.nodes(l).reverse(),t.links=w.links(t.nodes),t.nodes.forEach((function(e){e.y=e.depth*(10*h)})),t.nodes.forEach((function(e,t){null==e.id&&(e.id=++v),e.x0=e.x,e.y0=e.y})),t.isSelect||(t.setSelectNode(l),t.isSelect=!0),t.selectedIndex=t.findIndex(t.selectedId),t.childrenTable=[],t.cutChildLine(t.nodes[t.selectedIndex].children),c["selectAll"]("g.node").data(t.nodes),c["selectAll"]("path.link").data(t.links)},overCircle:function(e){u=e,O()},outCircle:function(e){u=null,O()},nodeTransform:function(e,t){return"translate(".concat(t,", ").concat(e,")")},setStyle:function(e,t,n,l){var r="";return r=e?"fill: lightsteelblue;":"fill: ".concat(t,";"),r+"stroke-width:".concat(n,"; stroke: ").concat(l,";")},textAnchor:function(e,t){return e||t?"end":"start"}}},B=z,L=B,M=(n("c581"),n("2877")),X=Object(M["a"])(L,s,a,!1,null,null,null),Y=X.exports,J={name:"app",components:{dndtree:Y}},$=J,U=(n("034f"),Object(M["a"])($,o,i,!1,null,null,null)),G=U.exports,q=n("5c96"),H=n.n(q);n("0fae");r["default"].use(H.a),r["default"].config.productionTip=!1,new r["default"]({render:function(e){return e(G)}}).$mount("#app")},"85ec":function(e,t,n){},b188:function(e){e.exports=JSON.parse('{"name":"root","icon":{"color":"#F1DEA3","shape":"rect","p1":"12","p2":"12","strokeWidth":"1.5","strokeColor":"#F2B974"},"children":[{"name":"graph","icon":{"color":"#ECD8D4","shape":"circle","p1":"6","p2":"0","strokeWidth":"1.5","strokeColor":"#D49EA2"},"children":[{"name":"BetweennessCentrality","icon":{"color":"#F2A490","shape":"circle","p1":"6","p2":"0","strokeWidth":"1.5","strokeColor":"#E97658"},"children":[]},{"name":"LinkDistance","icon":{"color":"#F2EAE7","shape":"ellipse","p1":"10","p2":"8","strokeWidth":"1.5","strokeColor":"#F1B6AE"},"children":[]},{"name":"MaxFlowMinCut","icon":{"color":"#F2A490","shape":"circle","p1":"6","p2":"0","strokeWidth":"1.5","strokeColor":"#E97658"},"children":[]},{"name":"ShortestPaths","icon":{"color":"#F2A490","shape":"circle","p1":"6","p2":"0","strokeWidth":"1.5","strokeColor":"#E97658"},"children":[]}]},{"name":"util","icon":{"color":"#B3DDD1","shape":"circle","p1":"6","p2":"0","strokeWidth":"1.5","strokeColor":"#BDBFAF"},"children":[{"name":"heap","icon":{"color":"#F2A490","shape":"circle","p1":"6","p2":"0","strokeWidth":"1.5","strokeColor":"#E97658"},"children":[]},{"name":"Geometry","icon":{"color":"#F2A490","shape":"circle","p1":"6","p2":"0","strokeWidth":"1.5","strokeColor":"#E97658"},"children":[]}]}]}')},c581:function(e,t,n){"use strict";var l=n("3c39"),r=n.n(l);r.a}});
//# sourceMappingURL=app.29d53f7a.js.map